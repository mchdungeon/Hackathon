window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var p=c.split("/");if(p=p[p.length-1],!e[p]){var s="function"==typeof __require&&__require;if(!a&&s)return s(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+c+"'")}}var h=o[c]={exports:{}};e[c][0].call(h.exports,function(t){return r(e[c][1][t]||t)},h,h.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({action:[function(t,e,o){"use strict";cc._RF.push(e,"67f0fZztolNJK9R53oVJ5w4","action");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attack=null,e.attacked=null,e.bottom=null,e.bounce=null,e.reflect=null,e.initXVelocity=-100,e.initYVelocity=-100,e}return n(e,t),e.prototype.onBeginContact=function(t,e,o){var n=e.node.parent.getComponent("hero"),r=o.getComponent("base").type,i=n.phy,c=n.int,a=n.agi;switch(r){case"racket":this.initXVelocity;var p=this.initYVelocity-2*a;cc.audioEngine.playEffect(this.bounce,!1),o.getComponent("racket").active&&(cc.audioEngine.playEffect(this.reflect,!1),e.getComponent("hp").damage(2),e.node.parent.getChildByName("circle").x=e.node.x,e.node.parent.getChildByName("circle").y=e.node.y,e.node.parent.getChildByName("circle").getComponent(cc.Animation).play("hado"),e.getComponent("ball").rigidbody.applyLinearImpulse(cc.v2(0,p),cc.v2(0,0)));break;case"hero":break;case"monster":var s=o.getComponent("creature").phy,h=o.getComponent("creature").int;o.node.parent.getComponent("monster").active&&(o.getComponent("base").physical?e.getComponent("hp").damage(s):e.getComponent("hp").damage(h),cc.audioEngine.playEffect(this.attacked,!1),e.node.parent.getChildByName("circle").x=e.node.x,e.node.parent.getChildByName("circle").y=e.node.y,e.node.parent.getChildByName("circle").getComponent(cc.Animation).play("hado")),o.getComponent("base").physical?o.getComponent("hp").damage(i):o.getComponent("hp").damage(c),cc.audioEngine.playEffect(this.attack,!1),o.node.parent.getChildByName("circle").getComponent(cc.Animation).play("hado");break;case"object":cc.audioEngine.playEffect(this.attack,!1),o.node.parent.getChildByName("circle").getComponent(cc.Animation).play("hado"),"door"==o.node.parent.name?(o.getComponent("hp").damage(o.getComponent("hp").maxHp/2),o.node.parent.getChildByName("sprite").getComponent(cc.Animation).play("door_open")):o.getComponent("hp").damage(i),o.getComponent("base").isDoor&&(o.getComponent("base").isDoorOpen?(o.getComponent("base").isDoorOpen=!1,this.node.dispatchEvent(new cc.Event.EventCustom("clear",!0))):o.getComponent("base").isDoorOpen=!0);break;case"chest":break;case"dead":e.getComponent("hp").damage(999),cc.audioEngine.playEffect(this.bottom,!1),e.node.parent.getChildByName("circle").x=e.node.x,e.node.parent.getChildByName("circle").y=e.node.y,e.node.parent.getChildByName("circle").getComponent(cc.Animation).play("hado");break;default:cc.audioEngine.playEffect(this.bounce,!1)}},e.prototype.onLoad=function(){},e.prototype.start=function(){},r([a(cc.AudioClip)],e.prototype,"attack",void 0),r([a(cc.AudioClip)],e.prototype,"attacked",void 0),r([a(cc.AudioClip)],e.prototype,"bottom",void 0),r([a(cc.AudioClip)],e.prototype,"bounce",void 0),r([a(cc.AudioClip)],e.prototype,"reflect",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],ball:[function(t,e,o){"use strict";cc._RF.push(e,"42dd7+C0ZhHvJbGUPS3WsM9","ball");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initXVelocity=200,e.initYVelocity=200,e.rigidbody=null,e.xVelocity=0,e.yVelocity=0,e.initial=!0,e}return n(e,t),e.prototype.addInitialImpulse=function(){this.rigidbody.applyLinearImpulse(cc.v2(this.xVelocity,this.yVelocity),cc.v2(0,0))},e.prototype.onLoad=function(){this.rigidbody=this.node.getComponent(cc.RigidBody),this.rigidbody.enabledContactListener=!0;var t=this.node.parent.getComponent("hero").agi;this.xVelocity=this.initXVelocity+2*t,this.yVelocity=this.initYVelocity+2*t},e.prototype.start=function(){},e.prototype.update=function(t){},e=r([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],base:[function(t,e,o){"use strict";cc._RF.push(e,"14a57zUGrhPp5IAPzNNMNIn","base");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="",e.physical=!0,e.isDoor=!1,e.isDoorOpen=!1,e}return n(e,t),e.prototype.start=function(){},r([a],e.prototype,"type",void 0),r([a],e.prototype,"physical",void 0),r([a],e.prototype,"isDoor",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],creature:[function(t,e,o){"use strict";cc._RF.push(e,"ad626OE4jFIF6L+si6gW207","creature");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hp=50,e.phy=10,e.int=10,e.agi=5,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},r([a],e.prototype,"hp",void 0),r([a],e.prototype,"phy",void 0),r([a],e.prototype,"int",void 0),r([a],e.prototype,"agi",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],entity:[function(t,e,o){"use strict";cc._RF.push(e,"f12a2Cm7tBNBZA7mlHwjoj6","entity");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dead=!1,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.node.on("dead",function(e){t.dead=!0,t.node.removeAllChildren(!0),e.stopPropagation()})},e.prototype.start=function(){},e=r([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"6f5d2vqKFZB+YJMWmD2ivZM","game");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game_area=null,e.hero_1=null,e.hero_2=null,e.hero_3=null,e.hero_status_1=null,e.hero_status_2=null,e.hero_status_3=null,e.racket=null,e.bottomBar=null,e.topBar=null,e.cover=null,e.goblin=null,e.goblin_king=null,e.bone=null,e.mage=null,e.rock=null,e.treasure=null,e.door=null,e.selector=0,e.dungeon_1=["stage1-1.json","stage1-2.json","stage1-3.json","stage1-4.json"],e.map=[],e}return n(e,t),e.prototype.loadMap=function(t,e){var o=this;o.topBar.getChildByName("level").getComponent(cc.Label).string="stage  "+(e+1),cc.loader.loadRes(t[e],function(t,e){if(null===t)for(var n=JSON.parse(JSON.stringify(e)).json,r=Object.keys(n).map(function(t){return n[t]}),i=0;i<r.length;i++)switch(r[i].be){case"goblin":o.map[i]=cc.instantiate(o.goblin),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"goblinKing":o.map[i]=cc.instantiate(o.goblin_king),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"bone":o.map[i]=cc.instantiate(o.bone),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"mage":o.map[i]=cc.instantiate(o.mage),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"rock":o.map[i]=cc.instantiate(o.rock),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"treasure":o.map[i]=cc.instantiate(o.treasure),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;case"door":o.map[i]=cc.instantiate(o.door),o.map[i].x=r[i].x,o.map[i].y=r[i].y,o.map[i].parent=o.game_area.getChildByName("dungeon");break;default:o.map[i]=null}})},e.prototype.setHeroes=function(t){var e=this,o=this.hero_status_1.getComponent("status"),n=this.hero_status_2.getComponent("status"),r=this.hero_status_3.getComponent("status");o.hp=t[0].attributes.hp,o.phy=t[0].attributes.phy,o.int=t[0].attributes.int,o.agi=t[0].attributes.agi,this.hero_1.getComponent("hero").phy=o.phy,this.hero_1.getComponent("hero").int=o.int,this.hero_1.getComponent("hero").agi=o.agi;var i=t[0].hero_type.name.en,c=t[0].image_url;cc.loader.load(c,function(t,o){e.hero_status_1.getChildByName("status").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame.setTexture(o),e.hero_status_1.getChildByName("status").getChildByName("sprite").active=!0}),this.hero_status_1.getChildByName("status").getChildByName("sprite").getChildByName("name").getComponent(cc.Label).string=i,this.hero_status_1.getChildByName("status").getChildByName("hp").getComponent(cc.Label).string="HP: "+o.hp,this.hero_status_1.getChildByName("status").getChildByName("phy").getComponent(cc.Label).string="PHY: "+o.phy,this.hero_status_1.getChildByName("status").getChildByName("int").getComponent(cc.Label).string="INT: "+o.int,this.hero_status_1.getChildByName("status").getChildByName("agi").getComponent(cc.Label).string="AGI: "+o.agi,n.hp=t[1].attributes.hp,n.phy=t[1].attributes.phy,n.int=t[1].attributes.int,n.agi=t[1].attributes.agi,this.hero_2.getComponent("hero").phy=n.phy,this.hero_2.getComponent("hero").int=n.int,this.hero_2.getComponent("hero").agi=n.agi;var a=t[1].hero_type.name.en,p=t[1].image_url;cc.loader.load(p,function(t,o){e.hero_status_2.getChildByName("status").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame.setTexture(o),e.hero_status_2.getChildByName("status").getChildByName("sprite").active=!0}),this.hero_status_2.getChildByName("status").getChildByName("sprite").getChildByName("name").getComponent(cc.Label).string=a,this.hero_status_2.getChildByName("status").getChildByName("hp").getComponent(cc.Label).string="HP: "+n.hp,this.hero_status_2.getChildByName("status").getChildByName("phy").getComponent(cc.Label).string="PHY: "+n.phy,this.hero_status_2.getChildByName("status").getChildByName("int").getComponent(cc.Label).string="INT: "+n.int,this.hero_status_2.getChildByName("status").getChildByName("agi").getComponent(cc.Label).string="AGI: "+n.agi,r.hp=t[2].attributes.hp,r.phy=t[2].attributes.phy,r.int=t[2].attributes.int,r.agi=t[2].attributes.agi,this.hero_3.getComponent("hero").phy=r.phy,this.hero_3.getComponent("hero").int=r.int,this.hero_3.getComponent("hero").agi=r.agi;var s=t[2].hero_type.name.en,h=t[2].image_url;cc.loader.load(h,function(t,o){e.hero_status_3.getChildByName("status").getChildByName("sprite").getComponent(cc.Sprite).spriteFrame.setTexture(o),e.hero_status_3.getChildByName("status").getChildByName("sprite").active=!0}),this.hero_status_3.getChildByName("status").getChildByName("sprite").getChildByName("name").getComponent(cc.Label).string=s,this.hero_status_3.getChildByName("status").getChildByName("hp").getComponent(cc.Label).string="HP: "+r.hp,this.hero_status_3.getChildByName("status").getChildByName("phy").getComponent(cc.Label).string="PHY: "+r.phy,this.hero_status_3.getChildByName("status").getChildByName("int").getComponent(cc.Label).string="INT: "+r.int,this.hero_status_3.getChildByName("status").getChildByName("agi").getComponent(cc.Label).string="AGI: "+r.agi},e.prototype.onLoad=function(){var t=this;t.hero_status_1.active=!1,t.hero_status_2.active=!1,t.hero_status_3.active=!1,t.cover.active=!0,window.addEventListener("message",function(e){t.hero_status_1.active=!0,t.hero_status_2.active=!0,t.hero_status_3.active=!0,t.cover.active=!1;var o=e.data;"setConfig"==o.method&&(o.params.import?t.setHeroes(o.params.heroes):(t.hero_status_1.getChildByName("status").getChildByName("sprite").active=!0,t.hero_status_2.getChildByName("status").getChildByName("sprite").active=!0,t.hero_status_3.getChildByName("status").getChildByName("sprite").active=!0))},!1),this.node.on("clear",function(e){t.game_area.getChildByName("dungeon").removeAllChildren(!0),t.map=[],t.selector+=1,t.loadMap(t.dungeon_1,t.selector),t.hero_1.getChildByName("ball")&&!t.hero_1.getChildByName("ball").getComponent("hp").dead&&t.bottomBar.getChildByName("statusButton1").runAction(cc.tintTo(.1,155,144,253)),t.hero_2.getChildByName("ball")&&!t.hero_2.getChildByName("ball").getComponent("hp").dead&&t.bottomBar.getChildByName("statusButton2").runAction(cc.tintTo(.1,155,144,253)),t.hero_3.getChildByName("ball")&&!t.hero_3.getChildByName("ball").getComponent("hp").dead&&t.bottomBar.getChildByName("statusButton3").runAction(cc.tintTo(.1,155,144,253)),t.hero_1.active=!1,t.hero_2.active=!1,t.hero_3.active=!1}),cc.director.getPhysicsManager().enabled=!0,this.loadMap(this.dungeon_1,this.selector),cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){},r([a(cc.Node)],e.prototype,"game_area",void 0),r([a(cc.Node)],e.prototype,"hero_1",void 0),r([a(cc.Node)],e.prototype,"hero_2",void 0),r([a(cc.Node)],e.prototype,"hero_3",void 0),r([a(cc.Node)],e.prototype,"hero_status_1",void 0),r([a(cc.Node)],e.prototype,"hero_status_2",void 0),r([a(cc.Node)],e.prototype,"hero_status_3",void 0),r([a(cc.Node)],e.prototype,"racket",void 0),r([a(cc.Node)],e.prototype,"bottomBar",void 0),r([a(cc.Node)],e.prototype,"topBar",void 0),r([a(cc.Node)],e.prototype,"cover",void 0),r([a(cc.Prefab)],e.prototype,"goblin",void 0),r([a(cc.Prefab)],e.prototype,"goblin_king",void 0),r([a(cc.Prefab)],e.prototype,"bone",void 0),r([a(cc.Prefab)],e.prototype,"mage",void 0),r([a(cc.Prefab)],e.prototype,"rock",void 0),r([a(cc.Prefab)],e.prototype,"treasure",void 0),r([a(cc.Prefab)],e.prototype,"door",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],hazard:[function(t,e,o){"use strict";cc._RF.push(e,"27a87UowUdHKKXqFm22n8Jo","hazard");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"text",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],hero:[function(t,e,o){"use strict";cc._RF.push(e,"1a025BbnuBK/5F7pQz0qrf8","hero");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.hpBar=null,e.sprite=null,e.status=null,e.phy=0,e.int=0,e.agi=0,e.dead=!1,e}return n(e,t),e.prototype.onLoad=function(){this.node.active=!1,this.phy=this.status.getComponent("status").phy,this.int=this.status.getComponent("status").int,this.agi=this.status.getComponent("status").agi},e.prototype.start=function(){},e.prototype.update=function(t){this.hpBar.x=this.ball.x,this.hpBar.y=this.ball.y,this.sprite.x=this.ball.x,this.sprite.y=this.ball.y},r([a(cc.Node)],e.prototype,"ball",void 0),r([a(cc.Node)],e.prototype,"hpBar",void 0),r([a(cc.Node)],e.prototype,"sprite",void 0),r([a(cc.Node)],e.prototype,"status",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],hp:[function(t,e,o){"use strict";cc._RF.push(e,"86398wP3nRPA6O4w79ph0FJ","hp");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hpSprite=null,e.sprite=null,e.hitAmount=null,e.status=null,e.maxHp=0,e.hp=0,e.hpBar=null,e.dead=!1,e}return n(e,t),e.prototype.killMyself=function(){this.hp<=0&&(this.dead=!0,this.node.dispatchEvent(new cc.Event.EventCustom("dead",!0)))},e.prototype.damage=function(t){var e=t/this.maxHp,o=cc.blink(.3,3),n=new cc.Color(255,90,90),r=cc.instantiate(this.hitAmount);if(r.parent=this.node.parent,r.x=this.node.x,r.y=this.node.y,r.getComponent(cc.Label).string=t,"hero"==this.getComponent("base").type&&(r.color=n),setTimeout(function(){r.runAction(cc.sequence(cc.spawn(cc.moveBy(.15,cc.v2(0,10)),cc.fadeOut(.15)),cc.callFunc(this.killMyself,this),cc.removeSelf()))}.bind(this),300),!this.dead){if(this.hp-=t,this.status){this.hp<=0&&(this.hp=0);var i="HP:"+this.hp;this.status.getChildByName("status").getChildByName("hp").getComponent(cc.Label).string=i}this.hp<=0?(this.status&&this.status.runAction(cc.tintTo(.1,160,75,75)),this.hpBar.fillRange=0,this.node.active=!1):this.hpBar.fillRange-=e,this.sprite.runAction(cc.sequence(o,cc.fadeIn(.1)))}},e.prototype.onLoad=function(){this.maxHp="hero"==this.getComponent("base").type?this.status.getComponent("status").hp:this.getComponent("creature").hp,this.hp=this.maxHp,this.hpBar=this.hpSprite.getComponent(cc.Sprite)},e.prototype.start=function(){},e.prototype.update=function(t){},r([a(cc.Node)],e.prototype,"hpSprite",void 0),r([a(cc.Node)],e.prototype,"sprite",void 0),r([a(cc.Prefab)],e.prototype,"hitAmount",void 0),r([a(cc.Node)],e.prototype,"status",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],monster:[function(t,e,o){"use strict";cc._RF.push(e,"08bc7F2t95O9amto4jMgs1R","monster");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.block=null,e.hp=null,e.sprite=null,e.active=!0,e}return n(e,t),e.prototype.switchActive=function(){this.getComponent("entity").dead&&this.unschedule(this.switchActive),this.active?this.hp.runAction(cc.tintTo(.1,140,75,75)):this.hp.runAction(cc.tintTo(.1,255,65,65)),this.active=!this.active},e.prototype.onLoad=function(){"monster"==this.node.getChildByName("block").getComponent("base").type&&this.hp.runAction(cc.tintTo(.01,255,65,65)),this.schedule(this.switchActive,this.node.getChildByName("block").getComponent("creature").agi)},e.prototype.start=function(){},r([a(cc.Node)],e.prototype,"block",void 0),r([a(cc.Node)],e.prototype,"hp",void 0),r([a(cc.Node)],e.prototype,"sprite",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],racket:[function(t,e,o){"use strict";cc._RF.push(e,"5f6a4TM8mFHQYhlsFzEwUwe","racket");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.speed=10,e.moveDir=0,e.rigidbody=null,e.blocked=0,e.active=!1,e}return n(e,t),e.prototype.switchActive=function(){this.active=!1},e.prototype.onKeyDown=function(t){var e=cc.macro;switch(t.keyCode){case e.KEY.right:this.moveDir=1;break;case e.KEY.left:this.moveDir=-1;break;case e.KEY.space:this.active=!0,this.node.runAction(cc.sequence(cc.moveBy(.05,cc.v2(0,30)),cc.callFunc(this.switchActive,this),cc.moveBy(.25,cc.v2(0,-30))))}},e.prototype.onKeyUp=function(t){var e=cc.macro;switch(t.keyCode){case e.KEY.right:-1!=this.moveDir&&(this.moveDir=0);break;case e.KEY.left:1!=this.moveDir&&(this.moveDir=0)}},e.prototype.onBeginContact=function(t,e,o){},e.prototype.onCollisionStay=function(t,e){e.node.x<t.node.x?this.blocked=1:t.node.x<e.node.x&&(this.blocked=-1)},e.prototype.onCollisionExit=function(t,e){this.blocked=0},e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.rigidbody.enabledContactListener=!0},e.prototype.start=function(){},e.prototype.update=function(t){(1!=this.blocked&&1==this.moveDir||-1!=this.blocked&&-1==this.moveDir)&&(this.node.x+=this.moveDir*this.speed)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"speed",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],status:[function(t,e,o){"use strict";cc._RF.push(e,"0aff057HC1GHpZrbohd3mhi","status");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,a=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.racket=null,e.shoot=null,e.hp=120,e.phy=20,e.int=10,e.agi=30,e}return n(e,t),e.prototype.onButtonClicked=function(){this.hero.getChildByName("ball")&&!this.hero.getChildByName("ball").getComponent("hp").dead&&(this.hero.x=this.racket.x,this.hero.y=this.racket.y+50,this.hero.getChildByName("ball").x=0,this.hero.getChildByName("ball").y=0,this.hero.active?(this.node.runAction(cc.tintTo(.1,155,144,253)),this.hero.getChildByName("ball").getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.hero.active=!1):(cc.audioEngine.playEffect(this.shoot,!1),this.node.runAction(cc.tintTo(.1,90,76,253)),this.hero.active=!0))},e.prototype.onLoad=function(){var t="HP:"+this.hp,e="PHY:"+this.phy,o="INT:"+this.int,n="AGI:"+this.agi;this.node.getChildByName("status").getChildByName("hp").getComponent(cc.Label).string=t,this.node.getChildByName("status").getChildByName("phy").getComponent(cc.Label).string=e,this.node.getChildByName("status").getChildByName("int").getComponent(cc.Label).string=o,this.node.getChildByName("status").getChildByName("agi").getComponent(cc.Label).string=n},e.prototype.start=function(){},e.prototype.update=function(t){},r([a(cc.Node)],e.prototype,"hero",void 0),r([a(cc.Node)],e.prototype,"racket",void 0),r([a(cc.AudioClip)],e.prototype,"shoot",void 0),r([a],e.prototype,"hp",void 0),r([a],e.prototype,"phy",void 0),r([a],e.prototype,"int",void 0),r([a],e.prototype,"agi",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["action","ball","base","creature","entity","game","hazard","hero","hp","monster","racket","status"]);